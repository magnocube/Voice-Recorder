<html>

<head>	
		<title>VoIP TAP Settings</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        
		<style>
	
		body {
			margin: 0;
			padding: 0;
			background: #292929;
			color: #ffffff;
			font-size: 15px;
		}

		html {
			background-color: #292929;
		}
	


	</style>

	
	<script type="text/javascript">
        function loadSettingsFromServer()
			{
			
			var text=httpGet("SETTINGS.TXT");
			
			<!-- split settings into lines (each line contains a setting)>
			var lines = text.split('\r\n');
			
			<!-- lines[0] contains the IP. this should not be placed in a dropdown (therefore this hardcoded solution) ->these 2 lines work perfectly>
			var IPsegments = lines[0].split(':');
			document.getElementById(IPsegments[0]).innerHTML = IPsegments[1];
		
		
			<!-- translate string to usable array>
			var myArray = [];
			for (l = 0; l < lines.length; l++) {
				var s = lines[l].split(":");
				myArray[l] = s;
			}
			
			
			<!-- go through each line. and set the dropdown to the right index>
			for(var line = 1; line < lines.length; line++){
				document.getElementById(myArray[line][0]).value = myArray[line][1];
			}
            			
        }
		

		function httpGet(theUrl)
			{
				var xmlHttp = new XMLHttpRequest(); 
				xmlHttp.open( "GET", theUrl, false ); 
				xmlHttp.send( null ); 
 				return xmlHttp.responseText; 
				
			
			} 
		function safeSettingsToServer() 
			{
			<!--generate settings file and post it>
			var xhttp = new XMLHttpRequest();
			xhttp.open("POST", "SETTINGS_SAVECONFIG", false);
			var toSend = "CONFIG:";
			toSend += '\r\n';
			toSend += "sample_rate:";
			toSend += document.getElementById("sample_rate").value;
			toSend += '\r\n';
			toSend += "bit_depth:";
			toSend += document.getElementById("bit_depth").value;
			toSend +='\r\n';
			toSend += "num_channels:";
			toSend += document.getElementById("num_channels").value;
			toSend += '\r\n';
			toSend += "channel1:";
			toSend += document.getElementById("channel1").value;
			toSend +='\r\n';
			toSend += "channel2:";
			toSend += document.getElementById("channel2").value;
			

			
			xhttp.send(toSend);
			document.body.innerHTML +=  "<br> <br> <h1>Page will now reload, should not take more than half a minute</h1>";
			location.reload();
		}
		
        </script>
</head>
    

<body onload="loadSettingsFromServer()">
<center>

<button type="button" onclick="safeSettingsToServer();">submit and restart</button> 

<br>
Ethernet Ip Adress
<p id="ethernet_ip">Unknown. Settings has not been received.</p>


<br>
Select sample rate.
<select id="sample_rate">
        <option value="16000">16000</option>
        <option value="48000">48000</option>
</select>

<br>
Select recording resolution
<select id="bit_depth">
        <option value="8">8 bit</option>
        <option value="16">16 bit</option>
</select>

<br>
Select mono or stereo mode for recording.
<select id="num_channels">
        <option value="1">Mono</option>
        <option value="2">Sterio</option>
</select>

<br>
Select Channel for recording in mono
<select id="channel1">
        <option value="3.5">3.5mm jack</option>
        <option value="5">5mm jack</option>
		<option value="BuildIn">Build in Microphone</option>
</select>

<br>
Select Channel 2 for recording in stereo.
<select id="channel2">
        <option value="3.5">3.5mm jack</option>
        <option value="5">5mm jack</option>
		<option value="BuildIn">Build in Microphone</option>
</select>

<button onclick="document.getElementById('channel2').selectedIndex=2">Force test mic build in</button>
<button onclick="document.getElementById('channel2').selectedIndex=0">Force test 3.5mm</button>
<button onclick="document.getElementById('channel2').selectedIndex=1">Force test 5mm</button>




</center>

<div id="workaround"> </div>
</body>
</html>
